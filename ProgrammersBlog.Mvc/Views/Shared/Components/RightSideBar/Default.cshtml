@model ProgrammersBlog.Mvc.Models.RightSideBarViewModel

@functions {
    // MenÃ¼ adÄ±nÄ± URL-friendly hale getiren yardÄ±mcÄ± metot
    string ToUrlFriendly(string text)
    {
        if (string.IsNullOrEmpty(text)) return "";
        
        // TÃ¼rkÃ§e karakterleri Ã§evir
        return text.ToLower()
            .Replace("Ã§", "c")
            .Replace("ÄŸ", "g")
            .Replace("Ä±", "i")
            .Replace("Ã¶", "o")
            .Replace("ÅŸ", "s")
            .Replace("Ã¼", "u")
            .Replace(" ", "-")
            .Replace(".", "")
            .Replace(",", "")
            .Replace(";", "")
            .Replace("'", "")
            .Replace("\"", "")
            .Replace(":", "")
            .Replace("!", "")
            .Replace("?", "")
            .Trim('-');
    }
}
<div class="col-lg-4">
    <!-- Arama Widget'Ä± -->
    <div class="widget-card">
        <h3 class="widget-title">Blog'da Ara</h3>
        <form class="d-flex" role="search" asp-controller="Article" asp-action="Search" method="get">
            <input class="form-control me-2" type="search" name="keyword" placeholder="Anahtar kelime..." aria-label="Search">
            <button class="btn btn-primary" type="submit">Ara</button>
        </form>
    </div>
    <!-- PopÃ¼ler Makaleler Widget'Ä± -->
    <div class="widget-card">
        <h3 class="widget-title">PopÃ¼ler Makaleler</h3>
        @for (int i = 0; i < Model.Articles.Count; i++)
        {
            var postClass = i == 0
            ? "popular-post border border-primary-subtle shadow-sm rounded p-2 bg-light"
            : "popular-post";
            <div class="@postClass">
                <img src="~/img/@Model.Articles[i].Thumbnail" alt="Popular Post" class="popular-post-img rounded">
                <div>
                    <h4 class="popular-post-title mb-1">
                        <a class="@(i == 0 ? "text-primary fw-semibold" : "")"
                           asp-controller="Article"
                           asp-action="Detail"
                           asp-route-articleId="@Model.Articles[i].Id">
                            @Model.Articles[i].Title
                        </a>
                    </h4>
                    <span class="popular-post-date small text-muted">
                        <i class="bi bi-calendar3"></i> @Model.Articles[i].CreatedDate.ToString("dd MMM yyyy")
                    </span>
                </div>
            </div>
        }
    </div>
    <!-- MenÃ¼ler Widget'Ä± -->
    <div class="widget-card">
        <h3 class="widget-title">MenÃ¼ler</h3>
        <ul class="category-list">
            <li><a asp-controller="Home" asp-action="Index">Hepsi <span class="category-count">@Model.Articles.Count</span></a></li>
            @foreach (var menu in Model.Menus.Where(m => m.ParentId == null).OrderBy(m => m.Order))
            {
                var subMenus = Model.Menus.Where(m => m.ParentId == menu.Id).ToList();
                var articleCount = Model.Articles.Count(a => a.MenuId == menu.Id);
                
                <li>
                    @if (menu.Name.ToLower().Trim() == "ana sayfa" || menu.Name.ToLower().Trim() == "anasayfa")
                    {
                        <a href="/">
                            @menu.Name <span class="category-count">@articleCount</span>
                        </a>
                    }
                    else
                    {
                        <a href="/menu/@ToUrlFriendly(menu.Name)">
                            @menu.Name <span class="category-count">@articleCount</span>
                        </a>
                    }
                    
                    @if (subMenus.Any())
                    {
                        <ul class="submenu-list ps-3 mt-1">
                            @foreach (var subMenu in subMenus.OrderBy(m => m.Order))
                            {
                                var subArticleCount = Model.Articles.Count(a => a.MenuId == subMenu.Id);
                                <li>
                                    <a href="/menu/@ToUrlFriendly(subMenu.Name)">
                                        <i class="bi bi-arrow-right-short"></i> @subMenu.Name <span class="category-count">@subArticleCount</span>
                                    </a>
                                </li>
                            }
                        </ul>
                    }
                </li>
            }
        </ul>
    </div>
    <!-- E-BÃ¼lten AboneliÄŸi -->
    <div class="widget-card">
        <h3 class="widget-title">E-BÃ¼lten'e Abone Olun</h3>
        <p>MuÄŸla ile ilgili en gÃ¼ncel bilgiler ve Ã¶zel teklifler iÃ§in abone olun.</p>
        <form class="newsletter-form">
            <div class="input-group mb-3">
                <input type="email" class="form-control" placeholder="E-posta adresiniz" aria-label="Email">
                <button class="btn btn-primary" type="submit">Abone Ol</button>
            </div>
        </form>
    </div>
    <!-- Etiketler Widget'Ä± -->
    <div class="widget-card" style="font-family: sans-serif;">
        <h3 class="widget-title d-flex align-items-center justify-content-between">
            Etiketler
            <span style="font-size: 0.75em; color: #888; margin-left: 10px;">
                <i class="fas fa-lightbulb" style="color: #ffc107;"></i> TÄ±kla ve keÅŸfet ðŸŒŸ
            </span>
        </h3>

        <div class="d-flex flex-wrap gap-2" id="etiketler">
            <a class="btn btn-sm" style="background-color:#fce4ec; color:#c2185b;" title="Deniz kenarÄ± tatilleri">#Plaj</a>
            <a class="btn btn-sm" style="background-color:#e3f2fd; color:#1565c0;" title="Tekne gezileri">#Tekne</a>
            <a class="btn btn-sm" style="background-color:#f3e5f5; color:#6a1b9a;" title="Antik ÅŸehirler">#Antik</a>
            <a class="btn btn-sm" style="background-color:#fff3e0; color:#ef6c00;" title="Yemek turlarÄ±">#Yemek</a>
            <a class="btn btn-sm" style="background-color:#e8f5e9; color:#2e7d32;" title="KÃ¼ltÃ¼rel etkinlikler">#KÃ¼ltÃ¼r</a>
            <a class="btn btn-sm" style="background-color:#ede7f6; color:#512da8;" title="Oteller ve konaklama">#Otel</a>
            <a class="btn btn-sm" style="background-color:#f1f8e9; color:#689f38;" title="Fethiye rehberi">#Fethiye</a>
            <a class="btn btn-sm" style="background-color:#fbe9e7; color:#d84315;" title="Bodrum gezilecek yerler">#Bodrum</a>
            <a class="btn btn-sm" style="background-color:#e0f7fa; color:#00838f;" title="Marmaris'te tatil">#Marmaris</a>
            <a class="btn btn-sm" style="background-color:#fff8e1; color:#ff6f00;" title="Festival programlarÄ±">#Festival</a>
            <a class="btn btn-sm" style="background-color:#edeef7; color:#3949ab;" title="DoÄŸa yÃ¼rÃ¼yÃ¼ÅŸÃ¼">#Trekking</a>
            <a class="btn btn-sm" style="background-color:#f9fbe7; color:#827717;" title="Kamp alanlarÄ±">#Kamp</a>
            <a class="btn btn-sm" style="background-color:#ffebee; color:#d81b60;" title="BalayÄ± rotalarÄ±">#BalayÄ±</a>
            <a class="btn btn-sm" style="background-color:#e0f2f1; color:#00796b;" title="Gece kulÃ¼pleri">#GeceHayatÄ±</a>
            <a class="btn btn-sm" style="background-color:#e1f5fe; color:#0288d1;" title="MÃ¼zik festivalleri">#MÃ¼zik</a>
            <a class="btn btn-sm" style="background-color:#fce4ec; color:#880e4f;" title="Deniz kenarÄ± rotalarÄ±">#Sahil</a>
            <a class="btn btn-sm" style="background-color:#ede7f6; color:#4527a0;" title="Tatil kÃ¶yleri">#Resort</a>
            <a class="btn btn-sm" style="background-color:#f1f8e9; color:#33691e;" title="Manzara noktalarÄ±">#Manzara</a>
            <a class="btn btn-sm" style="background-color:#fff3e0; color:#e65100;" title="Yaz tatili Ã¶nerileri">#YazTatili</a>
            <a class="btn btn-sm" style="background-color:#fbe9e7; color:#bf360c;" title="KahvaltÄ± mekanlarÄ±">#KahvaltÄ±</a>
        </div>

        <div class="mt-3">
            <button onclick="rastgeleEtiketSec()" class="btn btn-sm btn-success">ðŸŽ² Rastgele Etiket SeÃ§</button>
        </div>

        <div id="etiketAcilama" style="margin-top: 15px; font-size: 0.95em; color: #555;"></div>
        <div id="mesajKutusu" style="margin-top: 10px; font-style: italic; color: #777;"></div>

        <script>
            const etiketMesajlari = {
                "#Plaj": ["Dalga seslerini dinleâ€¦ ðŸŒŠ", "GÃ¼neÅŸin altÄ±nda kumlarla dans et! â˜€ï¸", "BugÃ¼n plajda sadece sen ve huzur var."],
                "#Tekne": ["RÃ¼zgarla yarÄ±ÅŸ, rotanÄ± kalbin Ã§izsin. â›µ", "Denizin ortasÄ±nda bir gÃ¼n her ÅŸeyi deÄŸiÅŸtirir. ðŸŒ…", "MartÄ±lar bile seni takip edecek!"],
                "#Antik": ["TaÅŸlara dokun, binlerce yÄ±l Ã¶ncesiyle tanÄ±ÅŸ. ðŸ›ï¸", "Zaman yolculuÄŸu gerÃ§ek olabilirâ€¦", "Bir uygarlÄ±ÄŸÄ±n hikayesine adÄ±m at."],
                "#Yemek": ["Yeni tatlar keÅŸfetmek de bir seyahat biÃ§imi! ðŸœ", "Bu gezi damakta iz bÄ±rakacak. ðŸ˜‹", "Lezzetli bir keÅŸif baÅŸlasÄ±n!"],
                "#KÃ¼ltÃ¼r": ["Her sokak bir hikÃ¢ye anlatÄ±râ€¦", "Yerel mÃ¼zikleri dinle, ruhun dans etsin! ðŸŽ­", "KÃ¼ltÃ¼r, bir yolculuÄŸun kalbidir."],
                "#Otel": ["Konforun adresi burasÄ±. ðŸ›ï¸", "Dinlenmeye vakit ayÄ±r, bedenin de tatil yapmalÄ±.", "SÄ±cak bir karÅŸÄ±lama seni bekliyor."],
                "#Fethiye": ["Fethiyeâ€™nin turkuazÄ±na doyamazsÄ±n! ðŸ’™", "Kelebekler Vadisi seni Ã§aÄŸÄ±rÄ±yor!", "Likya Yoluâ€™na adÄ±m at, efsaneler seninle."],
                "#Bodrum": ["Beyaz evler, mavi kapÄ±larâ€¦ Bodrum ruhu! ðŸŽ¨", "AkÅŸamlarÄ± Bodrum baÅŸka gÃ¼zeldirâ€¦", "GÃ¼ndÃ¼z deniz, gece eÄŸlence!"],
                "#Marmaris": ["Ã‡am ormanlarÄ± ve deniz burada buluÅŸur. ðŸŒ²ðŸŒŠ", "Marmarisâ€™te gÃ¼n doÄŸumu izlenir!", "Marinada bir yÃ¼rÃ¼yÃ¼ÅŸe ne dersin?"],
                "#Festival": ["Ritmi yakala, dans et, unut her ÅŸeyi! ðŸ¥³", "Festival enerjisi bir baÅŸkadÄ±r!", "IÅŸÄ±klar, mÃ¼zik ve senâ€¦"],
                "#Trekking": ["PatikalarÄ± takip et, nefesin aÃ§Ä±lÄ±r. ðŸ¥¾", "DoÄŸada yÃ¼rÃ¼dÃ¼kÃ§e zihnin de aÃ§Ä±lÄ±r.", "Her adÄ±m yeni bir manzara demek."],
                "#Kamp": ["YÄ±ldÄ±zlar altÄ±nda uyumaya hazÄ±r mÄ±sÄ±n? âœ¨", "Kamp ateÅŸi etrafÄ±nda anÄ±lar birikir.", "DoÄŸa dostlarÄ±nÄ± unutma!"],
                "#BalayÄ±": ["AÅŸkÄ±n rotasÄ± ÅŸimdi baÅŸlÄ±yor. ðŸ’", "Hayal gibi bir tatil sizi bekliyor!", "Birlikte keÅŸfetmenin tadÄ± baÅŸka."],
                "#GeceHayatÄ±": ["IÅŸÄ±klar yansÄ±n, gece baÅŸlasÄ±n! ðŸ’ƒ", "Dans, mÃ¼zik ve sen â€“ geceye hazÄ±rsÄ±n.", "Sokaklar sabaha kadar senin!"],
                "#MÃ¼zik": ["Ritmi kalbinde hisset. ðŸŽ¶", "Her festival bir baÅŸka hayat!", "MÃ¼ziÄŸin peÅŸinden git."],
                "#Sahil": ["AyaklarÄ±nÄ± denize uzat, dertleri bÄ±rak. ðŸŒ´", "Sahilde geÃ§irilen her dakika Ã¶zeldir.", "Kokusu bile huzur verirâ€¦"],
                "#Resort": ["Her ÅŸey dahil bir huzur! ðŸ–ï¸", "Åžimdi tamamen sana ait bir an.", "YalnÄ±zca keyif var, sorumluluk yok."],
                "#Manzara": ["Manzara karÅŸÄ±sÄ±nda sessiz kalmak bile yetmez. ðŸžï¸", "Ufka bak, iÃ§ini dinle.", "GÃ¶rmekle kalma, hisset."],
                "#YazTatili": ["GÃ¼neÅŸ, deniz ve yazlÄ±k elbiseler! â˜€ï¸ðŸ‘—", "Yaz senin ruh halin olsun.", "En gÃ¼zel anlar ÅŸimdi baÅŸlasÄ±n!"],
                "#KahvaltÄ±": ["Bir kahvaltÄ± dÃ¼nyayÄ± deÄŸiÅŸtirir. â˜•ðŸ³", "GÃ¼ne zengin baÅŸla!", "Menemen mi, serpme mi? Karar senin!"]
            };

            function rastgeleEtiketSec() {
                const etiketler = document.querySelectorAll('#etiketler a');
                etiketler.forEach(et => et.style.outline = 'none');

                const rastgele = etiketler[Math.floor(Math.random() * etiketler.length)];
                rastgele.style.outline = '3px solid #ff4081';
                rastgele.scrollIntoView({ behavior: 'smooth', block: 'center' });

                const etiketAdi = rastgele.textContent.trim();
                const aciklama = rastgele.getAttribute("title");
                const mesajlar = etiketMesajlari[etiketAdi] || ["Bu etiketle ilgili maceran seni bekliyor!"];
                const mesaj = mesajlar[Math.floor(Math.random() * mesajlar.length)];

                document.getElementById("etiketAcilama").innerHTML = `<strong>${etiketAdi}</strong>: ${aciklama}`;
                document.getElementById("mesajKutusu").innerText = mesaj;
            }
        </script>
    </div>
</div>